<head>
<link rel="SHORTCUT ICON" href="/design/logo3.png" type="image/png">
</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- DW6 -->
<head>
<!-- Copyright 2005 Macromedia, Inc. All rights reserved. -->
<title>spets_mx2_sd</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<link rel="stylesheet" href="mm_health_nutr.css" type="text/css" />
<script language="JavaScript" type="text/javascript">

</script>
<style type="text/css">
<!--
.СЃС‚РёР»СЊ1 {
	color: #FFFFFF;
	font-size: 16px;
}
.СЃС‚РёР»СЊ6 {font-size: 12px}
.СЃС‚РёР»СЊ8 {color: #3300CC; }
.СЃС‚РёР»СЊ10 {
	font-size: 14px;
	font-style: italic;
	font-weight: bold;
}
.СЃС‚РёР»СЊ12 {color: #FFCC00}
.СЃС‚РёР»СЊ13 {color: #FFFFFF}
.СЃС‚РёР»СЊ14 {color: #00CC33}
.СЃС‚РёР»СЊ15 {color: #0000FF}
.СЃС‚РёР»СЊ16 {color: #FFFFFF; font-size: 16px; font-weight: bold; }
.СЃС‚РёР»СЊ17 {color: #FFFFFF; font-size: 16px; font-family: Calibri; }
.СЃС‚РёР»СЊ18 {color: #0000FF; font-size: 16px; font-family: Calibri; }
.СЃС‚РёР»СЊ21 {font-size: 16px}
.стиль3 {color: #FFFFFF; font-size: 16px; font-family: Calibri; font-weight: bold; }
-->
</style>
</head>
<body bgcolor="#0099FF">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr bgcolor="#0099FF">
    <td colspan="3" rowspan="2" bgcolor="#0099FF"><img src="design/logo1.png" alt="Header image" width="382" height="101" border="0" /></td>
    <td height="50" colspan="" align="center" valign="bottom" nowrap="nowrap" bgcolor="#0099FF" class="СЃС‚РёР»СЊ1" id="logo"><h3 class="СЃС‚РёР»СЊ13">www.spetsialist-mx.ru</h3></td>
    <td width="15" bgcolor="#0099FF">&nbsp;</td>
  </tr>

  <tr bgcolor="#D5EDB3">
    <td height="51" colspan="3" align="center" valign="top" bgcolor="#0099FF" class="pageName" id="tagline"><h3 class="СЃС‚РёР»СЊ12">САЙТ О ПК &quot;СПЕЦИАЛИСТ&quot; И ЕГО КЛОНАХ</h3>    
    <h3 class="СЃС‚РёР»СЊ12">&nbsp;</h3></td>
	<td width="4" bgcolor="#0099FF">&nbsp;</td>
  </tr>

  <tr bgcolor="#0099FF">
    <td colspan="7"><img src="mm_spacer.gif" alt="" width="1" height="2" border="0" /></td>
  </tr>

 <tr>
    <td width="165" valign="top" bgcolor="#0099FF">
	<table border="0" cellspacing="0" cellpadding="0" width="165" id="navigation">
        <tr>
          <td width="165">&nbsp;<br />
		 &nbsp;<br /></td>
        </tr>
        <tr class="quote">
          <td width="165"><a href="index.html" class="navText СЃС‚РёР»СЊ6">ГЛАВНАЯ</a></td>
        </tr>
        <tr class="quote">
          <td width="165"><a href="index27.html" class="navText СЃС‚РёР»СЊ6">СИНХРОГЕНЕРАТОР</a></td>
        </tr>
        <tr class="quote">
         <td width="165"><a href="index28.html" class="navText СЃС‚РёР»СЊ6">КОНТРОЛЛЕР НГМД</a>        </tr>
        <tr class="quote">
          <td width="165"><a href="index29.html" class="navText СЃС‚РёР»СЊ6">ПАМЯТЬ</a></td>
        </tr>
        <tr class="quote">
         <td width="165"><a href="index30.html" class="navText СЃС‚РёР»СЊ6">ИНТЕРФЕЙСЫ</a>
         <td>         </tr>
        <tr class="quote">
         <td width="165"><a href="index31.html" class="navText СЃС‚РёР»СЊ6">КОНТРОЛЛЕР ЦВЕТА</a>
         <td>         </tr>
        <tr class="quote">
        <td width="165"><a href="index19.html" class="navText СЃС‚РёР»СЊ6 СЃС‚РёР»СЊ14">ПРОГРАММЫ</a>
        <td>        </tr>
        <tr class="quote">
         <td width="165"><a href="index20.html" class="navText СЃС‚РёР»СЊ6">ИГРЫ</a>
        <td>        </tr>
        <tr class="quote">
         <td width="165"><a href="index32.html" class="navText СЃС‚РёР»СЊ6">SD ИНТЕРФЕЙС</a>
        <td>        </tr>
        <tr class="quote">
         <td width="165"><a href="index9.html" class="navText СЃС‚РёР»СЊ6">ПЛИС</a>                  
        <td>        </tr>
        <tr class="quote">
         <td width="165"><a href="index10.html" class="navText СЃС‚РёР»СЊ6">ССЫЛКИ</a>
        <td>        </tr>
        <tr class="quote">
         <td width="165"><a href="index11.html" class="navText СЃС‚РёР»СЊ6">ОБРАТНАЯ СВЯЗЬ</a>                 
         <td>
      </table>
 	 <br />
  	&nbsp;<br />
  	&nbsp;<br />
  	&nbsp;<br /> 	</td>
    <td width="16">&nbsp;</td>
    <td colspan="2" valign="top"><div align="center">
      <center class="стиль10">
        <p class="стиль3"><img src="design/spetsialist_mx2_logo.png" alt="" width="365" height="47" /></p>
        <center>
          <p class="стиль3">СЧИТЫВАТЕЛЬ SD КАРТ</p>
        </center>
        <p align="justify" class="СЃС‚РёР»СЊ17">Автором ПК разработана и воплощена в ПЛИС схема считывателя SD карт. Он позволяет на данный момент загружать в память файл <strong>bios.bin</strong> c образом ПЗУ (до 12 кБайт), записанный на SD карточку на PC компьютере. Принцип работы считывателя таков. При записи в регистр данных <strong>SPIReg</strong> стробом <strong>/WR</strong> данные с шины записываются в регистр сдвига, по окончанию сброса верхний триггер записывает &quot;0&quot; и начинается процесс сдвига. Сразу же формируется &quot;окно&quot; сдвига <strong>BUSY</strong>. Если сдвиг не закончится к началу следующей команды процессора, то сигнал <strong>BUSY</strong> вызовет захват шины и процессор будет остановлен. Во время сдвига формируется 8 тактовых импульсов <strong>CLK</strong>, выставляется старший бит данных на <strong>MOSI</strong> и считывается в младший бит со входа <strong>MISO</strong>. После 8 тактов сдвига верхний триггер опрокинется сигналом переноса счётчика и процесс остановится. При этом снимется сигнал <strong>BUSY</strong> и со следующим тактом процессор продолжит выполнение программы.</p>
        <p align="justify" class="СЃС‚РёР»СЊ17">Так работает регистр данных<strong> SPIReg</strong>. Есть ещё регистры управления. Для правильной инициализации &quot;свежевставленной&quot; карты требуется низкая скорость SPI (312,5 кГц), ну а после инициализации можно использовать быструю скорость (2,5 МГц). Данные скорости формируются в делителе <strong>Divider</strong>.</p>
        <p align="justify" class="СЃС‚РёР»СЊ17">При чтении из регистра управления распределение битов таково:<br />
          D0 - &quot;0&quot; - карта не выбрана и &quot;1&quot; - карта выбрана;<br />
          D1 - текущая скорость обращения с картой (&quot;0&quot; - 312,5 кГц и &quot;1&quot; - 2,5 МГц);<br />
          D6 - &quot;0&quot; - готов и &quot;1&quot; - занят сдвигом;<br />
          D7 - &quot;0&quot; - карты нети &quot;1&quot; - карта вставлена.</p>
        <p align="justify" class="СЃС‚РёР»СЊ17">При записи в регистр управления распределение битов таково:<br />
          D0 - &quot;0&quot; - карта не выбрана и &quot;1&quot; - карта выбрана;<br />
          D1 - текущая скорость обращения с картой (&quot;0&quot; - 312,5 кГц и &quot;1&quot; - 2,5 МГц);<br />
          D2 - &quot;1&quot; - сигнал  обращения к карте -<strong> Operate</strong> - красный светодиод;<br />
          D3 - &quot;1&quot; - сигнал вставленной карты -<strong> Insert</strong> - зелёный светодиод. <br />
        </p>
        <p align="justify" class="СЃС‚РёР»СЊ17">Схема считывателя SD карт с цепями питания представлена ниже. Она собрана на ПЛИС EPM7064SLC44. &quot;Внутренность&quot; ПЛИС приведена ниже. Все схемы кликтабельны.</p>
        <p align="center" class="СЃС‚РёР»СЊ17"><img src="schemes/Spetsialist_MX2_SD.png" width="853" height="476" /></p>
        <p align="center" class="СЃС‚РёР»СЊ16"><img src="schemes/SPI.png" width="800" height="585" /></p>
        <table width="495" border="20" align="center">
          <tr>
            <th width="288" class="СЃС‚РёР»СЊ17" scope="col">Назначение</th>
            <th width="153" class="СЃС‚РёР»СЊ17" scope="col">Файл</th>
          </tr>

          <tr>
            <td class="СЃС‚РёР»СЊ17"><div align="center">Схемный ввод ПЛИС интерфейса SPI</div></td>
            <td class="СЃС‚РёР»СЊ17"><div align="center"><a href="schemes/SPI.pdf" class="СЃС‚РёР»СЊ15">SPI.pdf</a></div></td>
          </tr>
          <tr>
            <td class="СЃС‚РёР»СЊ17"><div align="center">Исходники в формате Quartus 9.1 Full</div></td>
            <td class="СЃС‚РёР»СЊ17"><div align="center"><a href="Soft/spets_mx2_sd.rar" class="СЃС‚РёР»СЊ15">spets_mx2_sd.rar</a></div></td>
          </tr>
        </table>
        </center>
      </div></td>
    <td width="15">&nbsp;</td>
  <td width="4" valign="top">&nbsp;</td>
	<td width="4">&nbsp;</td>
  </tr>
  <tr>
    <td width="165">&nbsp;</td>
    <td width="16">&nbsp;</td>
    <td width="201">&nbsp;</td>
    <td width="997" class="СЃС‚РёР»СЊ8"><div align="center">This site is &copy; Copyright Fifan 2007-2021, All Rights Reserved.</div></td>
    <td width="15">&nbsp;</td>
    <td width="4">&nbsp;</td>
	<td width="4">&nbsp;</td>
  </tr>
</table>
</body>
</html>
